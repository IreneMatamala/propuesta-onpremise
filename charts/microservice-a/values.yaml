# Valores por defecto para Microservicio A
replicaCount: 2

image:
  repository: nexus.local:8082/microservice-a
  tag: latest
  pullPolicy: IfNotPresent

environment: production

service:
  type: ClusterIP
  port: 8000

ingress:
  enabled: true
  className: nginx
  host: microservice-a.example.com
  annotations: {}
  tls:
    enabled: true
    secretName: microservice-a-tls

resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "200m"

strategy:
  type: RollingUpdate
  maxSurge: 25%
  maxUnavailable: 25%
  minReadySeconds: 30

securityContext:
  runAsUser: 1000
  runAsNonRoot: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true

podSecurityContext:
  fsGroup: 1000
  runAsNonRoot: true

logging:
  level: INFO

database:
  url: "postgresql://user:pass@postgresql-primary:5432/microservice_a"
  poolSize: 10
  poolTimeout: 30
  poolRecycle: 3600

security:
  cors:
    origins:
      - "https://microservice-a.example.com"
  rate_limiting:
    enabled: true
    default: "100 per minute"

secrets:
  managedBy: external-secrets
  vaultPath: "kv/microservice-a/production"
  
externalSecrets:
  enabled: false
  vault:
    address: "http://vault.vault.svc.cluster.local:8200"
    path: "secret/data/microservice-a"

nodeSelector: {}

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - microservice-a
        topologyKey: kubernetes.io/hostname

tolerations: []

pdb:
  minAvailable: "50%"

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 4
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80
